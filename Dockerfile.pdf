# Dockerfile для генерации PDF
FROM pandoc/latex:3.1.8

# Устанавливаем WeasyPrint для PDF
RUN apk add --no-cache \
    python3 \
    py3-pip \
    py3-cffi \
    py3-brotli \
    gcc \
    musl-dev \
    python3-dev \
    pango \
    cairo \
    bash

# Устанавливаем WeasyPrint
RUN pip3 install --no-cache-dir weasyprint

# Рабочая директория
WORKDIR /app

# Копируем проект
COPY . .

# Делаем скрипты исполняемыми
RUN chmod +x scripts/*.sh

# Команда по умолчанию
CMD ["bash", "scripts/generate_all_pdfs.sh"]


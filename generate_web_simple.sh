#!/bin/bash

# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–µ–±-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

DOCS_DIR="docs"
DIST_DIR="dist"

echo "üöÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–±-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏..."

# –°–æ–∑–¥–∞–µ–º dist –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p "$DIST_DIR"

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ HTML —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∫—Ä–æ–º–µ index.html)
find "$DIST_DIR" -name "*.html" ! -name "index.html" -type f -delete

# –ö–æ–ø–∏—Ä—É–µ–º —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
cp web-styles.css "$DIST_DIR/styles.css"
cp web-script.js "$DIST_DIR/script.js"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
if [ ! -f "$DIST_DIR/index.html" ]; then
    echo "‚ö†Ô∏è  –°–æ–∑–¥–∞—ë–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É..."
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ index.html, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
else
    echo "‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
fi

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã
doc_count=0

# –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
generate_doc() {
    local folder=$1
    local filename=$2
    local title=$3
    local section=$4
    
    local md_file="$DOCS_DIR/$folder/$filename"
    local html_file="$DIST_DIR/$folder.html"
    
    if [ ! -f "$md_file" ]; then
        echo "‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫: $md_file"
        return
    fi
    
    echo "üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: $title..."
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º MD –≤ HTML
    pandoc "$md_file" -f markdown -t html -o "$DIST_DIR/temp_content.html" 2>/dev/null
    
    # –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    cat > "$html_file" << EOF
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$title - –ü—Ä–æ–µ–∫—Ç 1–°—Ç–∏–ª—å</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞</h2>
            <p class="project-name">–ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã ¬´1–°—Ç–∏–ª—å¬ª</p>
        </div>
        <div class="nav-section">
            <h3>üéØ –ò–Ω–∏—Ü–∏–∞—Ü–∏—è</h3>
            <ul><li><a href="–£—Å—Ç–∞–≤_–ø—Ä–æ–µ–∫—Ç–∞.html">–£—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞</a></li></ul>
        </div>
        <div class="nav-section">
            <h3>üìä –ë–∞–∑–æ–≤—ã–µ –ø–ª–∞–Ω—ã</h3>
            <ul>
                <li><a href="–ë–∞–∑–æ–≤—ã–π_–ø–ª–∞–Ω_–ø–æ_—Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é.html">–ü–ª–∞–Ω –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é</a></li>
                <li><a href="–ë–∞–∑–æ–≤–æ–µ_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.html">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a></li>
                <li><a href="–ë–∞–∑–æ–≤—ã–π_–ø–ª–∞–Ω_–ø–æ_—Å—Ç–æ–∏–º–æ—Å—Ç–∏.html">–ü–ª–∞–Ω –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏</a></li>
            </ul>
        </div>
        <div class="nav-section">
            <h3>üìã –ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
            <ul>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–ø—Ä–æ–µ–∫—Ç–æ–º.html">–ü—Ä–æ–µ–∫—Ç–æ–º</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º.html">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏.html">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.html">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Å—Ç–æ–∏–º–æ—Å—Ç—å—é.html">–°—Ç–æ–∏–º–æ—Å—Ç—å—é</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∫–∞—á–µ—Å—Ç–≤–æ–º.html">–ö–∞—á–µ—Å—Ç–≤–æ–º</a></li>
                <li><a href="–ü–ª–∞–Ω_—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏—è_–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.html">–ü—Ä–æ—Ü–µ—Å—Å–∞–º–∏</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º–∏_—Ä–µ—Å—É—Ä—Å–∞–º–∏.html">–ß–†</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏.html">–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ä–∏—Å–∫–∞–º–∏.html">–†–∏—Å–∫–∞–º–∏</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∑–∞–∫—É–ø–∫–∞–º–∏.html">–ó–∞–∫—É–ø–∫–∞–º–∏</a></li>
                <li><a href="–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏_—Å—Ç–æ—Ä–æ–Ω–∞–º–∏.html">–ó–∞–∏–Ω—Ç–µ—Ä. —Å—Ç–æ—Ä–æ–Ω–∞–º–∏</a></li>
            </ul>
        </div>
        <div class="nav-section">
            <h3>üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h3>
            <ul><li><a href="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è_–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.html">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</a></li></ul>
        </div>
    </nav>
    
    <main class="content">
        <div class="breadcrumb">
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a> <span>‚Üí</span> <span>$section</span> <span>‚Üí</span> <span>$title</span>
        </div>
        <article class="markdown-body">
$(cat "$DIST_DIR/temp_content.html")
        </article>
        <footer class="doc-footer">
            <p>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ "–ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã ¬´1–°—Ç–∏–ª—å¬ª"</p>
            <p>–û–û–û ¬´1–°—Ç–∏–ª—å¬ª ‚Ä¢ PM Book 5-—è —Ä–µ–¥–∞–∫—Ü–∏—è ‚Ä¢ 2025</p>
        </footer>
    </main>
    
    <script src="script.js"></script>
</body>
</html>
EOF
    
    rm -f "$DIST_DIR/temp_content.html"
    ((doc_count++))
}

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
generate_doc "–£—Å—Ç–∞–≤_–ø—Ä–æ–µ–∫—Ç–∞" "–£—Å—Ç–∞–≤_–ø—Ä–æ–µ–∫—Ç–∞.md" "–£—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞" "–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞"
generate_doc "–ë–∞–∑–æ–≤—ã–π_–ø–ª–∞–Ω_–ø–æ_—Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é" "–ë–∞–∑–æ–≤—ã–π_–ø–ª–∞–Ω_–ø–æ_—Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é.md" "–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é" "–ë–∞–∑–æ–≤—ã–µ –ø–ª–∞–Ω—ã"
generate_doc "–ë–∞–∑–æ–≤–æ–µ_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ" "–ë–∞–∑–æ–≤–æ–µ_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.md" "–ë–∞–∑–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ" "–ë–∞–∑–æ–≤—ã–µ –ø–ª–∞–Ω—ã"
generate_doc "–ë–∞–∑–æ–≤—ã–π_–ø–ª–∞–Ω_–ø–æ_—Å—Ç–æ–∏–º–æ—Å—Ç–∏" "–ë–∞–∑–æ–≤—ã–π_–ø–ª–∞–Ω_–ø–æ_—Å—Ç–æ–∏–º–æ—Å—Ç–∏.md" "–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏" "–ë–∞–∑–æ–≤—ã–µ –ø–ª–∞–Ω—ã"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–ø—Ä–æ–µ–∫—Ç–æ–º" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–ø—Ä–æ–µ–∫—Ç–æ–º.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Å—Ç–æ–∏–º–æ—Å—Ç—å—é" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Å—Ç–æ–∏–º–æ—Å—Ç—å—é.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç—å—é" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∫–∞—á–µ—Å—Ç–≤–æ–º" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∫–∞—á–µ—Å—Ç–≤–æ–º.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–æ–º" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏—è_–ø—Ä–æ—Ü–µ—Å—Å–æ–≤" "–ü–ª–∞–Ω_—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏—è_–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.md" "–ü–ª–∞–Ω —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º–∏_—Ä–µ—Å—É—Ä—Å–∞–º–∏" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º–∏_—Ä–µ—Å—É—Ä—Å–∞–º–∏.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ä–∏—Å–∫–∞–º–∏" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_—Ä–∏—Å–∫–∞–º–∏.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∑–∞–∫—É–ø–∫–∞–º–∏" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∑–∞–∫—É–ø–∫–∞–º–∏.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—É–ø–∫–∞–º–∏" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏_—Å—Ç–æ—Ä–æ–Ω–∞–º–∏" "–ü–ª–∞–Ω_—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è_–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏_—Å—Ç–æ—Ä–æ–Ω–∞–º–∏.md" "–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏" "–ü–ª–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
generate_doc "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è_–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" "–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md" "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"

echo ""
echo "‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $doc_count"
echo "üìÅ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –≤ –ø–∞–ø–∫–µ: $DIST_DIR/"
echo ""
echo "üåê –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ: file://$(pwd)/$DIST_DIR/index.html"

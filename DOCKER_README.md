# üê≥ Docker Setup

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ –≤–µ–∑–¥–µ.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker Desktop (–∏–ª–∏ Docker Engine + Docker Compose)
- Make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–¥–æ–±–Ω—ã—Ö –∫–æ–º–∞–Ω–¥)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: NPM —Å–∫—Ä–∏–ø—Ç—ã

```bash
# –°–±–æ—Ä–∫–∞ –≤–µ–±-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
npm run build

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
npm run pdf
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Make –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make help

# –°–±–æ—Ä–∫–∞ –≤ Docker
make docker-build

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –≤ Docker
make docker-serve

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –≤ Docker
make docker-pdf

# –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ (HTML + PDF + —Å–µ—Ä–≤–µ—Ä)
make docker-all
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Docker Compose –Ω–∞–ø—Ä—è–º—É—é

```bash
# –°–±–æ—Ä–∫–∞ –≤–µ–±-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
docker-compose run --rm build

# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
docker-compose up web

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
docker-compose run --rm pdf

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞
docker-compose down
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker

### `Dockerfile`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–±–æ—Ä–∫–∞ HTML –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑:** `pandoc/core:3.1.8`

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:**
- Pandoc 3.1.8
- Bash
- Python 3

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
docker build -t 1c-docs-builder .
docker run -v $(pwd)/dist:/app/dist 1c-docs-builder
```

### `Dockerfile.pdf`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑:** `pandoc/latex:3.1.8`

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:**
- Pandoc 3.1.8
- LaTeX
- WeasyPrint
- Python 3

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
docker build -f Dockerfile.pdf -t 1c-docs-pdf .
docker run -v $(pwd)/docs:/app/docs 1c-docs-pdf
```

### `docker-compose.yml`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–°–µ—Ä–≤–∏—Å—ã:**

1. **build** - –°–±–æ—Ä–∫–∞ HTML
   - –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç: `docs/`, `templates/`, `styles/`, `dist/`
   - –ö–æ–º–∞–Ω–¥–∞: `bash scripts/generate_web_simple.sh`

2. **web** - –í–µ–±-—Å–µ—Ä–≤–µ—Ä
   - –ü–æ—Ä—Ç: `8000`
   - –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç: `dist/` (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
   - URL: http://localhost:8000

3. **pdf** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
   - –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç: `docs/`, `styles/`
   - –ö–æ–º–∞–Ω–¥–∞: `bash scripts/generate_all_pdfs.sh`

## üîß Makefile –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `make help` | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã |
| **–õ–æ–∫–∞–ª—å–Ω—ã–µ (–±–µ–∑ Docker)** |
| `make build` | –°–æ–±—Ä–∞—Ç—å –≤–µ–±-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é |
| `make pdf` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF |
| `make serve` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä |
| `make clean` | –û—á–∏—Å—Ç–∏—Ç—å `dist/` |
| **Docker –∫–æ–º–∞–Ω–¥—ã** |
| `make docker-build` | –°–æ–±—Ä–∞—Ç—å –≤ Docker |
| `make docker-pdf` | PDF –≤ Docker |
| `make docker-serve` | –°–µ—Ä–≤–µ—Ä –≤ Docker |
| `make docker-clean` | –û—á–∏—Å—Ç–∏—Ç—å Docker |
| **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ** |
| `make all` | –°–±–æ—Ä–∫–∞ + —Å–µ—Ä–≤–µ—Ä |
| `make docker-all` | HTML + PDF + —Å–µ—Ä–≤–µ—Ä (Docker) |

## üìù NPM —Å–∫—Ä–∏–ø—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `npm run build` | –°–±–æ—Ä–∫–∞ –≤ Docker |
| `npm run build:local` | –°–±–æ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker) |
| `npm run dev` | –°–µ—Ä–≤–µ—Ä –≤ Docker |
| `npm run dev:local` | –°–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ |
| `npm run pdf` | PDF –≤ Docker |
| `npm run pdf:local` | PDF –ª–æ–∫–∞–ª—å–Ω–æ |
| `npm run clean` | –û—á–∏—Å—Ç–∏—Ç—å `dist/` |
| `npm run deploy` | –î–µ–ø–ª–æ–π –Ω–∞ Vercel |

## üåê Vercel Deployment

Vercel —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker –¥–ª—è —Å–±–æ—Ä–∫–∏:

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `vercel.json` —É–∫–∞–∑–∞–Ω–æ:
```json
{
  "buildCommand": "docker-compose run --rm build"
}
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞ Vercel

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç `Dockerfile`
2. –°–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É —Å–±–æ—Ä–∫–∏
4. –î–µ–ø–ª–æ–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `dist/`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è - –≤—Å—ë –≤ Docker –æ–±—Ä–∞–∑–µ.

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: Docker –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç pandoc

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ `pandoc/core`
```bash
docker pull pandoc/core:3.1.8
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

**–†–µ—à–µ–Ω–∏–µ:** Docker –º–æ–Ω—Ç–∏—Ä—É–µ—Ç volume, –ø—Ä–∞–≤–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
```bash
# Linux/macOS
sudo chown -R $USER:$USER dist/

# Windows (WSL)
# –ü—Ä–æ–±–ª–µ–º –æ–±—ã—á–Ω–æ –Ω–µ—Ç
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker layer caching
```bash
# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `docker-compose.yml`
```yaml
ports:
  - "8080:8000"  # –í–Ω–µ—à–Ω–∏–π:–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç–æ–¥ | –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ | –†–∞–∑–º–µ—Ä |
|-------|--------------|--------|
| –õ–æ–∫–∞–ª—å–Ω–æ (bash) | ~1-2 —Å–µ–∫ | - |
| Docker (–ø–µ—Ä–≤—ã–π —Ä–∞–∑) | ~10-15 —Å–µ–∫ | ~300 MB |
| Docker (–∫—ç—à) | ~2-3 —Å–µ–∫ | ~300 MB |

## üîç –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–±–æ—Ä–∫–∏
```bash
docker-compose run --rm build 2>&1 | tee build.log
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å bash –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose run --rm build bash

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
cd scripts
bash generate_web_simple.sh
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
# –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤
docker images | grep 1c-docs

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -it 1c-docs-builder bash
```

## üéØ Best Practices

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker –¥–ª—è CI/CD** - –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤–µ–∑–¥–µ
2. **–õ–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ Docker** - –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`npm run build:local`)
3. **Docker –¥–ª—è production** - –≥–∞—Ä–∞–Ω—Ç–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
4. **–ú–æ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–∞–ø–∫–∏** - –±—ã—Å—Ç—Ä–µ–µ —Å–±–æ—Ä–∫–∞
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.dockerignore`** - –º–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–±–æ—Ä–∫–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- [Pandoc Docker Images](https://hub.docker.com/r/pandoc/core)
- [Vercel Docker Support](https://vercel.com/docs/build-output-api/v3#dockerfile)

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Docker setup –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞! üéâ

